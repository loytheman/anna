{"version":3,"file":"interfaces.js","sourceRoot":"","sources":["../src/interfaces.ts"],"names":[],"mappings":";;;AACA,6DAAwD;AAoBvD,CAAC;AAsBD,CAAC;AAGF,IAAY,WAGX;AAHD,WAAY,WAAW;IACnB,0BAAW,CAAA;IACX,4BAAa,CAAA;AACjB,CAAC,EAHW,WAAW,2BAAX,WAAW,QAGtB;AAED,IAAY,SAKX;AALD,WAAY,SAAS;IACjB,8BAAiB,CAAA;IACjB,4BAAe,CAAA;IACf,0BAAa,CAAA;IACb,sCAAyB,CAAA;AAC7B,CAAC,EALW,SAAS,yBAAT,SAAS,QAKpB;AA4CM,IAAM,wBAAwB,GAAG,UAAC,QAAsB;IAC3D,IAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;IACnC,IAAM,MAAM,GAAG,IAAA,+BAAY,EAAC,QAAQ,CAAC,CAAC;IACtC,IAAM,WAAW,GAAa;QAC1B,EAAE,EAAE,MAAM;QACV,UAAU,EAAE,QAAsB;QAClC,MAAM,EAAE,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,WAAW,CAAC,IAAI;QAC7D,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC;QAChC,KAAK,EAAE,QAAQ,CAAC,OAAO;QACvB,SAAS,EAAE,QAAQ,CAAC,WAAW;QAC/B,uBAAuB;KAC1B,CAAC;IACF,OAAO,WAAW,CAAC;AACvB,CAAC,CAAA;AAbY,QAAA,wBAAwB,4BAapC","sourcesContent":["import { Contract, Position as IbkrPosition } from \"@stoqey/ib\";\nimport { getSymbolKey } from \"./utils/instrument.utils\";\n\nexport interface Instrument {\n    symbol: string,\n    exchange: string,\n    type?: string,\n    secType?: string,\n    lastTradeDate?: string,\n    lastTradeDateOrContractMonth?: string,\n\n    // other fields\n}\n\nexport interface TickByTickAllLast {\n    date: Date;\n    price: number;\n    size: number;\n    exchange: string;\n    specialConditions: string;\n    contract: Contract;\n};\n\nexport interface MarketData {\n    instrument?: Instrument;\n    open?: number;\n    high?: number;\n    low?: number;\n    close: number;\n    volume?: number;\n\n    date: Date;\n\n    price?: number; // tick data\n    bid?: number;\n    ask?: number;\n\n    wap?: number;\n    vwap?: number;\n\n    count?: number;\n\n    timestamp?: number;\n};\n\n\nexport enum OrderAction {\n    BUY = 'BUY',\n    SELL = 'SELL',\n}\n\nexport enum OrderType {\n    MARKET = 'MARKET',\n    LIMIT = 'LIMIT',\n    STOP = 'STOP',\n    STOP_LIMIT = 'STOP_LIMIT',\n}\n\nexport interface Position {\n    id?: string,\n    instrument: Instrument,\n    price: number,\n    lastPrice?: number,\n    quantity: number,\n    action: OrderAction,\n    entryDate?: Date,\n}\n\nexport interface Order {\n    id: string,\n    instrument?: Instrument,\n    quantity: number,\n    action: OrderAction,\n    type: OrderType,\n    limitPrice?: number,\n    stopPrice?: number,\n    status?: string,\n    filled?: number,\n    remaining?: number,\n    avgFillPrice?: number,\n    commission?: number,\n    commissionCurrency?: string,\n    ocaGroup?: string,\n    useRth?: boolean,\n    tif?: string,\n    date?: Date,\n}\n\nexport interface Trade {\n    id: string,\n    instrument?: Instrument,\n    entryPrice: number,\n    price: number,\n    quantity: number,\n    action: OrderAction,\n    type: OrderType,\n    date: Date,\n    entryDate?: Date,\n}\n\nexport const ibkrPositionTossPosition = (position: IbkrPosition): Position => {\n    const contract = position.contract;\n    const symbol = getSymbolKey(contract);\n    const newPosition: Position = {\n        id: symbol,\n        instrument: contract as Instrument,\n        action: position.pos > 0 ? OrderAction.BUY : OrderAction.SELL,\n        quantity: Math.abs(position.pos),\n        price: position.avgCost,\n        lastPrice: position.marketPrice,\n        // TODO date, entryDate\n    };\n    return newPosition;\n}"]}