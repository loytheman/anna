{"version":3,"file":"awaitP.js","sourceRoot":"","sources":["../../src/utils/awaitP.ts"],"names":[],"mappings":";;AAeA,wBAaC;AA5BD;;;;;;;;;;;;;;GAcG;AACH,SAAgB,MAAM,CAClB,OAAmB,EACnB,QAA8B;IAE9B,OAAO,OAAO;SACT,IAAI,CAAY,UAAC,IAAO,IAAK,OAAA,CAAC,IAAI,EAAE,IAAI,CAAC,EAAZ,CAAY,CAAC;SAC1C,KAAK,CAAiB,UAAC,GAAM;QAC1B,IAAI,QAAQ,EAAE,CAAC;YACX,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;QACjC,CAAC;QAED,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC;AACX,CAAC;AAED,kBAAe,MAAM,CAAC","sourcesContent":["/**\n * Async await wrapper for easy error handling\n * @param { Promise } promise\n * @param { Object= } errorExt - Additional Information you can pass to the err object\n * @return {[ Promise.resolve, error ]}\n * \n     let err, user, savedTask;\n\n     [ user, err ] = await awaitTo(UserModel.findById(1));\n     if(!user) return cb('No user found');\n\n     [ savedTask, err ] = await awaitTo(TaskModel({userId: user.id, name: 'Demo Task'}));\n     if(err) return cb('Error occurred while saving task');\n\n */\nexport function awaitP<T, U = Error>(\n    promise: Promise<T>,\n    errorExt?: Record<string, any>\n): Promise<[undefined, U] | [T, null]> {\n    return promise\n        .then<[T, null]>((data: T) => [data, null])\n        .catch<[undefined, U]>((err: U) => {\n            if (errorExt) {\n                Object.assign(errorExt, err);\n            }\n\n            return [undefined, err];\n        });\n}\n\nexport default awaitP;\n"]}